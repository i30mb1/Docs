## rtmp by tiangolo/nginx-rtmp

Установить Docker 
- запускает Linux в изолированной среде
- docker run -d -p 8080:1935 --name nginx-rtmp tiangolo/nginx-rtmp
- в twitch стримим по rtmp://localhost:8080/live (пароль stream) или в камере по адресу rtmp://адресс_комба:8080/live (пароль stream)
- в OBS добавить "Источник VLC видео" rtmp://localhost:8080/live/stream 

----- 
## rtmp by ravenium

docker run -d -p 8080:1935/udp ravenium/srt-live-server
траслируем c twitch на srt://localhost:8080?streamid=input/live/hello без ключа
получаем srt://localhost:8080?streamid=output/live/hello

----
## srt by ossrs/srs

```bash
docker run --rm -it -p 8080:10080/udp ossrs/srs:5 ./objs/srs -c conf/srt.conf
```

```
docker run --rm -p 8082:1935 \
-p 8085:1985 \
-p 8090:8080 \
-p 8083:8000/udp \
-p 8080:10080/udp \
-e SRS_SRT_SERVER_SENDBUF=4000000 \
-e SRS_SRT_SERVER_RECVBUF=4000000 \
-e SRS_SRT_SERVER_MAXBW=-1 \
ossrs/srs:latest ./objs/srs -c conf/srt.conf
```

```bash
стримлю с камеры на srt://127.0.0.1:8080
или twith srt://127.0.0.1:8080?streamid=#!::r=live/livestream,m=publish

стримлю с larix url srt://127.0.0.1:8080 а streamid  #!::r=live/livestream1,m=publish

srt://95.47.60.78:1935
```
по адресу можно смотреть онлайн http://localhost:8090/
читаю в плеер
```
ffplay 'srt://127.0.0.1:8080?streamid=#!::r=live/livestream,m=request'
```
читаю в OBS vlc 
```
srt://localhost:8080?streamid=live/livestream
srt://localhost:8080?streamid=live/livestream1
```

-----

Полная команда с задержкой для стрима в плохих условиях
```bash
docker run -p 8082:1935 \
-p 8085:1985 \
-p 8090:8080 \
-p 8083:8000/udp \
-p 8080:10080/udp \
-e SRS_SRT_SERVER_SENDBUF=4000000 \
-e SRS_SRT_SERVER_RECVBUF=4000000 \
-e SRS_SRT_SERVER_MAXBW=-1 \
-e SRS_SRT_SERVER_ENABLED=on \
-e SRS_LOG_LEVEL=trace \
-e SRS_LOG_LEVEL_V2=trace \
-e SRS_SRT_SERVER_CONNECT_TIMEOUT=10000 \
-e SRS_SRT_SERVER_PEERLATENCY=2000 \
-e SRS_SRT_SERVER_RECVLATENCY=2000 \
-e SRS_SRT_SERVER_LATENCY=4000 \
-e SRS_SRT_SERVER_TLPKTDROP=on \
-e SRS_SRT_SERVER_TSBPDMODE=on \
-e SRS_VHOST_SRT_TO_RTMP=off \
ossrs/srs:latest ./objs/srs -c conf/hevc.ts.conf
```

 -v $(pwd)/stability.hevc.ts.conf:/usr/local/srs/conf/hevc.ts.conf 
 подменить файл конфига

## Логи

- ` SRT_CPB Transport Stats # pktRecv=4004, pktRcvLoss=0, pktRcvRetrans=0, pktRcvDrop=0`

 Этот лог отражает статистику сетевого транспорта для протокола SRT (Secure Reliable Transport). 
 Отображается количество принятых пакетов (`pktRecv=4004`)
количество потерянных (`pktRcvLoss=0`) пакетов
переотправленных (`pktRcvRetrans=0`) пакетов
отброшенных (`pktRcvDrop=0`) пакетов
общее время (`time=287556`)
количество пакетов (`packets=4002`)
информация об интенсивности трафика в килобитах в секунду (`okbps` и `ikbps`)